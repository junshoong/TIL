<!DOCTYPE html>
<html>
    <head>
        <title>[Docker] Data Volume을 사용해서 데이터 지속하기 - TIL</title>
        <meta charset="utf-8" />
        <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" />
        <link href="../theme/static/css/style.css" rel="stylesheet" />
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
        <link href="http://til.junshoong.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="TIL Full Atom Feed" />
        <link href="http://til.junshoong.net/feeds/docker.atom.xml" type="application/atom+xml" rel="alternate" title="TIL Categories Atom Feed" />
    </head>

    <body id="index" class="archive">
        <div class="container">
            <div class="header">
                <ul class="nav nav-pills pull-right">
                    <li class=""><a href="..">Home</a></li>
                    <li><a href="../archives.html">Archives</a></li>
                    <li><a href="http://blog.junshoong.net">Blog</a></li>
                </ul>
                <h3 class="text-muted"><a href="..">TIL</a></h3>
				<h2 class="text-muted"></h2>
             </div>
<section id="content" class="article content">
  <header>
    <h2 class="entry-title">
      <a href="../docker/persist-data-with-data-volume" rel="bookmark"
         title="Permalink to [Docker] Data Volume을 사용해서 데이터 지속하기">[Docker] Data Volume을 사용해서 데이터 지속하기</a></h2>
 
  </header>
  
     
  <div class="entry-content">
    <p>docker와 git-hook을 사용해서 어느정도 프로세스를 자동화하고 있다.
하지만 docker container를 부수고 다시 build 해서 돌리면 내부 데이터가 날아간다. DB의 경우는 <code>--link</code> 옵션을 이용해서 유지하지만 실제로 upload한 image와 같은 file들의 경우는 컨테이너와 함께 지워진다.</p>
<p>Data Volume을 사용해서 해결해보자.</p>
<div class="highlight"><pre><span></span>docker create -v /srv/media --name data-store ubuntu /bin/true
</pre></div>


<p>이렇게하면 ubuntu 이미지를 기반으로한 Data Volume이 하나 생긴다.
이때 공유된 디렉터리인 <code>/srv/media</code> 는 다른 컨테이너에 붙여서 사용할 수 있다.</p>
<div class="highlight"><pre><span></span>sudo docker run --name possster --volumes-from media-store -d project
</pre></div>


<p>지웠다가 다시 만들어서 run해도 동일한 상태를 확인할 수 있다.
또한 여러 컨테이너들과 같은 Data Volume을 공유할 수도 있다.</p>
<p>아래에서 좀 더 다양한 정보를 확인할 수 있다.
- <a href="https://docs.docker.com/engine/tutorials/dockervolumes/">docker 공식문서 - Manage data in containers</a>
- <a href="http://www.tricksofthetrades.net/2016/03/14/docker-data-volumes/">Tricks of the Trades - Data volumes and Data Containers</a>
- <a href="https://www.digitalocean.com/community/tutorials/how-to-work-with-docker-data-volumes-on-ubuntu-14-04">DigitalOcean - How To Work with Docker Data Volumes on Ubuntu 14.04</a></p>
  </div><!-- /.entry-content -->
   <footer class="post-info text-muted">
    Posted on <abbr class="published" title="2017-04-21T00:00:00+09:00">
      2017-04-21, Fri
    </abbr>
    <address class="vcard author">
      by <a class="url fn" href="../author/junshoong">junshoong</a>
    </address> in <a href="../docker/index">Docker</a> Tagged <a href="../tag/docker">docker </a><a href="../tag/data">data </a>  </footer><!-- /.post-info -->
</section>
            <footer id="contentinfo" class="footer">
                    <nav class="pull-right bottom-nav">
                        <a href="http://til.junshoong.net/feeds/all.atom.xml">RSS</a>
                    </nav>
                    <address id="about" class="vcard body">
                    &copy; <a href="..">TIL</a> Proudly powered by <a href="http://getpelican.com/">Pelican</a>
                    </address><!-- /#about -->
            </footer><!-- /#contentinfo -->
        </div><!-- container -->
    </body>
</html>